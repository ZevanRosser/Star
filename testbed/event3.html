 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title></title>
    <script>
      window.addEventListener('load', function() {
        Events = {
          _handlers: {},
          _events: {},
          _sort : function(a, b) {
              return (a.zIndex || 0) - (b.zIndex || 0);
          },
          handlers: function(event_name, handler) {
            if (!(event_name && handler)) {
              return this._handlers;
            }
            if (this._handlers[event_name] != null) {
              this._handlers[event_name].push(handler);
            } else {
              this._handlers[event_name] = [handler];
            }
            return this._handlers[event_name].length - 1;
          },
          events: function(event_name, event_fired) {
            //if (!(event_name && event_fired)) {
              return this._events;
            //}
            this._events[event_name] = event_fired;
          },
          on: function(event_name, callback, error_handler) {
            var handler_place,
                _this = this;
            if (this.events()[event_name]) {
              handler_place = this.handlers(event_name, {
                callback: callback,
                error_handler: error_handler
              });
              this._callback(event_name, callback, error_handler);
            } else {
              this.events(event_name, false);
              handler_place = this.handlers(event_name, {
                callback: callback,
                error_handler: error_handler
              });
            }
            return function(zIndex) {
              return _this.handlers()[event_name][handler_place].zIndex = zIndex;
            };
          },
          emit: function(event_name) {
            var handler, sortedHandlers, _i, _len;
            if (this.events()[event_name] || !(this.handlers()[event_name] != null)) {
              return false;
            }
            sortedHandlers = this.handlers()[event_name].slice().sort(this._sort);
            for (_i = 0, _len = sortedHandlers.length; _i < _len; _i++) {
              handler = sortedHandlers[_i];
              this._callback(event_name, handler.callback, handler.error_handler);
            }
            this.events(event_name, true);
          },
          _callback: function(event_name, callback, error_handler) {
            try {
              return callback();
            } catch (error) {
              if (typeof error_handler === "function") {
                error_handler();
              }
            }
            return true;
          },
          reset: function() {
            this._handlers = {};
            this._events = {};
          }
        };
        
        
        Events.on('hit', function() {
          console.log('hit a');
        });
        
        Events.on('hit', function() {
          console.log('hit b');
        });
        
        Events.emit('hit');
        Events.emit('hit');
        Events.emit('hit');
      });
    </script>
    <style>
    </style>
  </head>
  <body>
    
  </body>
</html>